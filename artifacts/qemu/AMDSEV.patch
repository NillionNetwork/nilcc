diff --git a/build.sh b/build.sh
index 9654329..626b32b 100755
--- a/build.sh
+++ b/build.sh
@@ -47,7 +47,7 @@ done
 
 mkdir -p $INSTALL_DIR
 IDIR=$INSTALL_DIR
-INSTALL_DIR=$(readlink -e $INSTALL_DIR)
+INSTALL_DIR=$(realpath $INSTALL_DIR)
 [ -n "$INSTALL_DIR" -a -d "$INSTALL_DIR" ] || {
 	echo "Installation directory [$IDIR] does not exist, exiting"
 	exit 1
diff --git a/common.sh b/common.sh
index 5f9da16..ce44e34 100755
--- a/common.sh
+++ b/common.sh
@@ -169,7 +169,7 @@ build_install_ovmf()
 		GCCVERS="GCC5"
 	fi
 
-	BUILD_CMD="nice build -q --cmd-len=64436 -DDEBUG_ON_SERIAL_PORT=TRUE -n $(getconf _NPROCESSORS_ONLN) ${GCCVERS:+-t $GCCVERS} -a X64 -p OvmfPkg/OvmfPkgX64.dsc"
+	BUILD_CMD="nice build -q --cmd-len=64436 -DDEBUG_ON_SERIAL_PORT=TRUE -n $(getconf _NPROCESSORS_ONLN) ${GCCVERS:+-t $GCCVERS} -a X64 -p OvmfPkg/AmdSev/AmdSevX64.dsc"
 
 	# initialize git repo, or update existing remote to currently configured one
 	if [ -d ovmf ]; then
@@ -194,12 +194,14 @@ build_install_ovmf()
 		run_cmd make -C BaseTools clean
 		run_cmd make -C BaseTools -j $(getconf _NPROCESSORS_ONLN)
 		. ./edksetup.sh --reconfig
+
+		# Required for building AmdSev package without grub
+		run_cmd touch OvmfPkg/AmdSev/Grub/grub.efi
+
 		run_cmd $BUILD_CMD
 
 		mkdir -p $DEST
-		run_cmd cp -f Build/OvmfX64/DEBUG_$GCCVERS/FV/OVMF_CODE.fd $DEST
-		run_cmd cp -f Build/OvmfX64/DEBUG_$GCCVERS/FV/OVMF_VARS.fd $DEST
-		run_cmd cp -f Build/OvmfX64/DEBUG_$GCCVERS/FV/OVMF.fd $DEST
+		run_cmd cp -f Build/AmdSev/DEBUG_$GCCVERS/FV/OVMF.fd $DEST
 
 		COMMIT=$(git log --format="%h" -1 HEAD)
 		run_cmd echo $COMMIT >../source-commit.ovmf
@@ -231,7 +233,7 @@ build_install_qemu()
 	pushd qemu >/dev/null
 		run_cmd git fetch current
 		run_cmd git checkout current/${QEMU_BRANCH}
-		run_cmd ./configure --target-list=x86_64-softmmu --prefix=$DEST
+		run_cmd ./configure --target-list=x86_64-softmmu --prefix=$DEST --static --enable-slirp
 		run_cmd $MAKE
 		run_cmd $MAKE install
 
